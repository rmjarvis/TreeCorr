

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Input Data &mdash; TreeCorr 4.1.6 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Two-point Correlation Functions" href="correlation2.html" />
    <link rel="prev" title="Overview" href="overview.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> TreeCorr
          

          
          </a>

          
            
            
              <div class="version">
                4.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Input Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-catalog-class">The Catalog class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-utilities-related-to-catalogs">Other utilities related to catalogs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="correlation2.html">Two-point Correlation Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="correlation3.html">Three-point Correlation Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="metric.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="binning.html">Binning</a></li>
<li class="toctree-l1"><a class="reference internal" href="patches.html">Patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="cov.html">Covariance Estimates</a></li>
<li class="toctree-l1"><a class="reference internal" href="field.html">Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Using configuration files</a></li>
<li class="toctree-l1"><a class="reference internal" href="params.html">Configuration Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Changes from version 4.0 to 4.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Previous History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TreeCorr</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Input Data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/catalog.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="input-data">
<h1>Input Data<a class="headerlink" href="#input-data" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-catalog-class">
<h2>The Catalog class<a class="headerlink" href="#the-catalog-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="treecorr.Catalog">
<em class="property">class </em><code class="sig-prename descclassname">treecorr.</code><code class="sig-name descname">Catalog</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">config</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">num</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">logger</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">is_rand</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">x</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">y</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">z</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ra</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dec</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">r</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">w</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wpos</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">flag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">g1</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">g2</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">k</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">patch</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">patch_centers</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog" title="Permalink to this definition">¶</a></dt>
<dd><p>A set of input data (positions and other quantities) to be correlated.</p>
<p>A Catalog object keeps track of the relevant information for a number of objects to
be correlated.  The objects each have some kind of position (for instance (x,y), (ra,dec),
(x,y,z), etc.), and possibly some extra information such as weights (w), shear values (g1,g2),
or kappa values (k).</p>
<p>The simplest way to build a Catalog is to simply pass in numpy arrays for each
piece of information you want included.  For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span> <span class="o">=</span> <span class="n">treecorr</span><span class="o">.</span><span class="n">Catalog</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">)</span>
</pre></div>
</div>
<p>Each of these input paramters should be a numpy array, where each corresponding element
is the value for that object.  Of course, all the arrays should be the same size.</p>
<p>In some cases, there are additional required parameters.  For instance, with RA and Dec
positions, you need to declare what units the given input values use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span> <span class="o">=</span> <span class="n">treecorr</span><span class="o">.</span><span class="n">Catalog</span><span class="p">(</span><span class="n">ra</span><span class="o">=</span><span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="o">=</span><span class="n">dec</span><span class="p">,</span> <span class="n">g1</span><span class="o">=</span><span class="n">g1</span><span class="p">,</span> <span class="n">g2</span><span class="o">=</span><span class="n">g2</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">ra_units</span><span class="o">=</span><span class="s1">&#39;hour&#39;</span><span class="p">,</span> <span class="n">dec_units</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For (ra,dec) positions, these units fields are required to specify the units of the angular
values.  For (x,y) positions, the units are optional (and usually unnecessary).</p>
<p>You can also initialize a Catalog by reading in columns from a file.  For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span> <span class="o">=</span> <span class="n">treecorr</span><span class="o">.</span><span class="n">Catalog</span><span class="p">(</span><span class="s1">&#39;data.fits&#39;</span><span class="p">,</span> <span class="n">ra_col</span><span class="o">=</span><span class="s1">&#39;ALPHA2000&#39;</span><span class="p">,</span> <span class="n">dec_col</span><span class="o">=</span><span class="s1">&#39;DELTA2000&#39;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">g1_col</span><span class="o">=</span><span class="s1">&#39;E1&#39;</span><span class="p">,</span> <span class="n">g2_col</span><span class="o">=</span><span class="s1">&#39;E2&#39;</span><span class="p">,</span> <span class="n">ra_units</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">dec_units</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This reads the given columns from the input file.  The input file may be either
a FITS catalog or an ASCII catalog.  Normally the file type is determined according to the
file’s extension (e.g. ‘.fits’ here), but it can also be set explicitly with <code class="docutils literal notranslate"><span class="pre">file_type</span></code>.</p>
<p>Finally, you may store all the various parameters in a configuration dict
and just pass the dict as an argument after the file name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;ra_col&#39;</span> <span class="p">:</span> <span class="s1">&#39;ALPHA2000&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="s1">&#39;dec_col&#39;</span> <span class="p">:</span> <span class="s1">&#39;DELTA2000&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="s1">&#39;g1_col&#39;</span> <span class="p">:</span> <span class="s1">&#39;E1&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="s1">&#39;g2_col&#39;</span> <span class="p">:</span> <span class="s1">&#39;E2&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="s1">&#39;ra_units&#39;</span> <span class="p">:</span> <span class="s1">&#39;deg&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="s1">&#39;dec_units&#39;</span> <span class="p">:</span> <span class="s1">&#39;deg&#39;</span> <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span> <span class="o">=</span> <span class="n">treecorr</span><span class="o">.</span><span class="n">Catalog</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>This can be useful for encapsulating all the TreeCorr options in a single place in your
code, which might be used multiple times.  Notably, this syntax ignores any dict keys
that are not relevant to the Catalog construction, so you can use the same config dict
for the Catalog and your correlation objects, which can be convenient.</p>
<p>See also <a class="reference internal" href="params.html#configuration-parameters"><span class="std std-ref">Configuration Parameters</span></a> for complete descriptions of all of the relevant
configuration parameters, particularly the first section <a class="reference internal" href="params.html#parameters-about-the-input-file-s"><span class="std std-ref">Parameters about the input file(s)</span></a>.</p>
<p>You may also override any configuration parameters or add additional parameters as kwargs
after the config dict.  For instance, to flip the sign of the g1 values after reading
from the input file, you could write:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cat1</span> <span class="o">=</span> <span class="n">treecorr</span><span class="o">.</span><span class="n">Catalog</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">flip_g1</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>After construction, a Catalog object will have the following attributes:</p>
<dl class="field-list">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><ul>
<li><p><strong>x</strong> – The x positions, if defined, as a numpy array (converted to radians if x_units
was given). (None otherwise)</p></li>
<li><p><strong>y</strong> – The y positions, if defined, as a numpy array (converted to radians if y_units
was given). (None otherwise)</p></li>
<li><p><strong>z</strong> – The z positions, if defined, as a numpy array. (None otherwise)</p></li>
<li><p><strong>ra</strong> – The right ascension, if defined, as a numpy array (in radians). (None otherwise)</p></li>
<li><p><strong>dec</strong> – The declination, if defined, as a numpy array (in radians). (None otherwise)</p></li>
<li><p><strong>r</strong> – The distance, if defined, as a numpy array. (None otherwise)</p></li>
<li><p><strong>w</strong> – The weights, as a numpy array. (All 1’s if no weight column provided.)</p></li>
<li><p><strong>wpos</strong> – The weights for position centroiding, as a numpy array, if given. (None otherwise,
which means that implicitly wpos = w.)</p></li>
<li><p><strong>g1</strong> – The g1 component of the shear, if defined, as a numpy array. (None otherwise)</p></li>
<li><p><strong>g2</strong> – The g2 component of the shear, if defined, as a numpy array. (None otherwise)</p></li>
<li><p><strong>k</strong> – The convergence, kappa, if defined, as a numpy array. (None otherwise)</p></li>
<li><p><strong>patch</strong> – The patch number of each object, if patches are being used. (None otherwise)
If the entire catalog is a single patch, then <code class="docutils literal notranslate"><span class="pre">patch</span></code> may be an int.</p></li>
<li><p><strong>ntot</strong> – The total number of objects (including those with zero weight if
<code class="docutils literal notranslate"><span class="pre">keep_zero_weight</span></code> is set to True)</p></li>
<li><p><strong>nobj</strong> – The number of objects with non-zero weight</p></li>
<li><p><strong>sumw</strong> – The sum of the weights</p></li>
<li><p><strong>varg</strong> – The shear variance (aka shape noise) (0 if g1,g2 are not defined)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If there are weights, this is really <span class="math notranslate nohighlight">\(\sum(w^2 |g|^2)/\sum(w)\)</span>,
which is more like <span class="math notranslate nohighlight">\(\langle w \rangle \mathrm{Var}(g)\)</span>.
It is only used for <code class="docutils literal notranslate"><span class="pre">var_method='shot'</span></code>, where the noise estimate is this
value divided by the total weight per bin, so this is the right quantity
to use for that.</p>
</div>
</li>
<li><p><strong>vark</strong> – The kappa variance (0 if k is not defined)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If there are weights, this is really <span class="math notranslate nohighlight">\(\sum(w^2 \kappa^2)/\sum(w)\)</span>.
As for <code class="docutils literal notranslate"><span class="pre">varg</span></code>, this is the right quantity to use for the <code class="docutils literal notranslate"><span class="pre">'shot'</span></code>
noise estimate.</p>
</div>
</li>
<li><p><strong>name</strong> – When constructed from a file, this will be the file_name.  It is only used as
a reference name in logging output  after construction, so if you construct it
from data vectors directly, it will be <code class="docutils literal notranslate"><span class="pre">''</span></code>.  You may assign to it if you want to
give this catalog a specific name.</p></li>
<li><p><strong>coords</strong> – Which kind of coordinate system is defined for this catalog.
The possibilities for this attribute are:</p>
<blockquote>
<div><ul class="simple">
<li><p>‘flat’ = 2-dimensional flat coordinates.  Set when x,y are given.</p></li>
<li><p>‘spherical’ = spherical coordinates.  Set when ra,dec are given.</p></li>
<li><p>‘3d’ = 3-dimensional coordinates.  Set when x,y,z or ra,dec,r are given.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>field</strong> – If any of the <a class="reference internal" href="#treecorr.Catalog.getNField" title="treecorr.Catalog.getNField"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">get?Field</span></code></a> methods have been called to construct
a field from this catalog (either explicitly or implicitly via a <a class="reference internal" href="nn.html#treecorr.NNCorrelation.process" title="treecorr.NNCorrelation.process"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">corr.process()</span></code></a> command, then this attribute will hold the most recent
field to have been constructed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It holds this field as a weakref, so if caching is turned off with
<code class="docutils literal notranslate"><span class="pre">resize_cache(0)</span></code>, and the field has been garbage collected, then this
attribute will be None.</p>
</div>
</li>
</ul>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>file_name</strong> (<em>str</em>) – The name of the catalog file to be read in. (default: None, in which
case the columns need to be entered directly with <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, etc.)</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – A configuration dict which defines attributes about how to read the
file.  Any optional kwargs may be given here in the config dict if
desired.  Invalid keys in the config dict are ignored. (default: None)</p></li>
<li><p><strong>num</strong> (<em>int</em>) – Which number catalog are we reading.  e.g. for NG correlations the
catalog for the N has num=0, the one for G has num=1.  This is only
necessary if you are using a config dict where things like <code class="docutils literal notranslate"><span class="pre">x_col</span></code>
have multiple values.  (default: 0)</p></li>
<li><p><strong>logger</strong> – If desired, a Logger object for logging. (default: None, in which case
one will be built according to the config dict’s verbose level.)</p></li>
<li><p><strong>is_rand</strong> (<em>bool</em>) – If this is a random file, then setting is_rand to True will let them
skip k_col, g1_col, and g2_col if they were set for the main catalog.
(default: False)</p></li>
<li><p><strong>x</strong> (<em>array</em>) – The x values. (default: None; When providing values directly, either
x,y are required or ra,dec are required.)</p></li>
<li><p><strong>y</strong> (<em>array</em>) – The y values. (default: None; When providing values directly, either
x,y are required or ra,dec are required.)</p></li>
<li><p><strong>z</strong> (<em>array</em>) – The z values, if doing 3d positions. (default: None; invalid in
conjunction with ra, dec.)</p></li>
<li><p><strong>ra</strong> (<em>array</em>) – The RA values. (default: None; When providing values directly, either
x,y are required or ra,dec are required.)</p></li>
<li><p><strong>dec</strong> (<em>array</em>) – The Dec values. (default: None; When providing values directly, either
x,y are required or ra,dec are required.)</p></li>
<li><p><strong>r</strong> (<em>array</em>) – The r values (the distances of each source from Earth). (default: None;
invalid in conjunction with x, y.)</p></li>
<li><p><strong>w</strong> (<em>array</em>) – The weights to apply when computing the correlations. (default: None)</p></li>
<li><p><strong>wpos</strong> (<em>array</em>) – The weights to use for position centroiding. (default: None, which
means to use the value weights, w, to weight the positions as well.)</p></li>
<li><p><strong>flag</strong> (<em>array</em>) – An optional array of flags, indicating objects to skip.  Rows with
flag != 0 (or technically flag &amp; ~ok_flag != 0) will be given a weight
of 0.  (default: None)</p></li>
<li><p><strong>g1</strong> (<em>array</em>) – The g1 values to use for shear correlations. (g1,g2 may represent any
spinor field.) (default: None)</p></li>
<li><p><strong>g2</strong> (<em>array</em>) – The g2 values to use for shear correlations. (g1,g2 may represent any
spinor field.) (default: None)</p></li>
<li><p><strong>k</strong> (<em>array</em>) – The kappa values to use for scalar correlations. (This may represent
any scalar field.) (default: None)</p></li>
<li><p><strong>patch</strong> (<em>array</em><em> or </em><em>int</em>) – <p>Optionally, patch numbers to use for each object. (default: None)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This may also be an int if the entire catalog represents a
single patch.  If <code class="docutils literal notranslate"><span class="pre">patch_centers</span></code> is given this will select those
items from the full input that correspond to the given patch number.</p>
</div>
</p></li>
<li><p><strong>patch_centers</strong> (<em>array</em><em> or </em><em>str</em>) – Alternative to setting patch by hand or using kmeans, you
may instead give patch_centers either as a file name or an array
from which the patches will be determined. (default: None)</p></li>
</ul>
</dd>
<dt class="field-odd">Keyword Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_type</strong> (<em>str</em>) – What kind of file is the input file. Valid options are ‘ASCII’ or
‘FITS’ (default: if the file_name extension starts with .fit, then use
‘FITS’, else ‘ASCII’)</p></li>
<li><p><strong>delimiter</strong> (<em>str</em>) – For ASCII files, what delimiter to use between values. (default: None,
which means any whitespace)</p></li>
<li><p><strong>comment_marker</strong> (<em>str</em>) – For ASCII files, what token indicates a comment line. (default: ‘#’)</p></li>
<li><p><strong>first_row</strong> (<em>int</em>) – Which row to take as the first row to be used. (default: 1)</p></li>
<li><p><strong>last_row</strong> (<em>int</em>) – Which row to take as the last row to be used. (default: -1, which means
the last row in the file)</p></li>
<li><p><strong>every_nth</strong> (<em>int</em>) – Only use every nth row of the input catalog. (default: 1)</p></li>
<li><p><strong>npatch</strong> (<em>int</em>) – <p>How many patches to split the catalog into (using kmeans) for the
purpose of jackknife variance or other options that involve running via
patches. (default: 1)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the catalog has ra,dec,r positions, the patches will
be made using just ra,dec.</p>
</div>
</p></li>
<li><p><strong>kmeans_init</strong> (<em>str</em>) – If using kmeans to make patches, which init method to use.
cf. <a class="reference internal" href="field.html#treecorr.Field.run_kmeans" title="treecorr.Field.run_kmeans"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">Field.run_kmeans</span></code></a> (default: ‘tree’)</p></li>
<li><p><strong>kmeans_alt</strong> (<em>str</em>) – If using kmeans to make patches, whether to use the alternate kmeans
algorithm. cf. <a class="reference internal" href="field.html#treecorr.Field.run_kmeans" title="treecorr.Field.run_kmeans"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">Field.run_kmeans</span></code></a> (default: False)</p></li>
<li><p><strong>x_col</strong> (<em>str</em><em> or </em><em>int</em>) – The column to use for the x values. This should be an integer for ASCII
files or a string for FITS files. (default: 0 or ‘0’, which means not
to read in this column. When reading from a file, either x_col and
y_col are required or ra_col and dec_col are required.)</p></li>
<li><p><strong>y_col</strong> (<em>str</em><em> or </em><em>int</em>) – The column to use for the y values. This should be an integer for ASCII
files or a string for FITS files. (default: 0 or ‘0’, which means not
to read in this column. When reading from a file, either x_col and
y_col are required or ra_col and dec_col are required.)</p></li>
<li><p><strong>z_col</strong> (<em>str</em><em> or </em><em>int</em>) – The column to use for the z values. This should be an integer for ASCII
files or a string for FITS files. (default: 0 or ‘0’, which means not
to read in this column; invalid in conjunction with ra_col, dec_col.)</p></li>
<li><p><strong>ra_col</strong> (<em>str</em><em> or </em><em>int</em>) – The column to use for the ra values. This should be an integer for
ASCII files or a string for FITS files. (default: 0 or ‘0’, which
means not to read in this column. When reading from a file, either
x_col and y_col are required or ra_col and dec_col are required.)</p></li>
<li><p><strong>dec_col</strong> (<em>str</em><em> or </em><em>int</em>) – The column to use for the dec values. This should be an integer for
ASCII files or a string for FITS files. (default: 0 or ‘0’, which
means not to read in this column. When reading from a file, either
x_col and y_col are required or ra_col and dec_col are required.)</p></li>
<li><p><strong>r_col</strong> (<em>str</em><em> or </em><em>int</em>) – The column to use for the r values. This should be an integer for ASCII
files or a string for FITS files. (default: 0 or ‘0’, which means not
to read in this column; invalid in conjunction with x_col, y_col.)</p></li>
<li><p><strong>x_units</strong> (<em>str</em>) – The units to use for the x values, given as a string.  Valid options are
arcsec, arcmin, degrees, hours, radians.  (default: radians, although
with (x,y) positions, you can often just ignore the units, and the
output separations will be in whatever units x and y are in.)</p></li>
<li><p><strong>y_units</strong> (<em>str</em>) – The units to use for the y values, given as a string.  Valid options are
arcsec, arcmin, degrees, hours, radians.  (default: radians, although
with (x,y) positions, you can often just ignore the units, and the
output separations will be in whatever units x and y are in.)</p></li>
<li><p><strong>ra_units</strong> (<em>str</em>) – The units to use for the ra values, given as a string.  Valid options
are arcsec, arcmin, degrees, hours, radians. (required when using
ra_col or providing ra directly)</p></li>
<li><p><strong>dec_units</strong> (<em>str</em>) – The units to use for the dec values, given as a string.  Valid options
are arcsec, arcmin, degrees, hours, radians. (required when using
dec_col or providing dec directly)</p></li>
<li><p><strong>g1_col</strong> (<em>str</em><em> or </em><em>int</em>) – The column to use for the g1 values. This should be an integer for
ASCII files or a string for FITS files. (default: 0 or ‘0’, which means
not to read in this column.)</p></li>
<li><p><strong>g2_col</strong> (<em>str</em><em> or </em><em>int</em>) – The column to use for the g2 values. This should be an integer for
ASCII files or a string for FITS files. (default: 0 or ‘0’, which means
not to read in this column.)</p></li>
<li><p><strong>k_col</strong> (<em>str</em><em> or </em><em>int</em>) – The column to use for the kappa values. This should be an integer for
ASCII files or a string for FITS files. (default: 0 or ‘0’, which means
not to read in this column.)</p></li>
<li><p><strong>patch_col</strong> (<em>str</em><em> or </em><em>int</em>) – The column to use for the patch numbers. This should be an integer
for ASCII files or a string for FITS files. (default: 0 or ‘0’, which
means not to read in this column.)</p></li>
<li><p><strong>w_col</strong> (<em>str</em><em> or </em><em>int</em>) – The column to use for the weight values. This should be an integer for
ASCII files or a string for FITS files. (default: 0 or ‘0’, which means
not to read in this column.)</p></li>
<li><p><strong>wpos_col</strong> (<em>str</em><em> or </em><em>int</em>) – The column to use for the position weight values. This should be an
integer for ASCII files or a string for FITS files. (default: 0 or ‘0’,
which means not to read in this column, in which case wpos=w.)</p></li>
<li><p><strong>flag_col</strong> (<em>str</em><em> or </em><em>int</em>) – The column to use for the flag values. This should be an integer for
ASCII files or a string for FITS files. Any row with flag != 0 (or
technically flag &amp; ~ok_flag != 0) will be given a weight of 0.
(default: 0 or ‘0’, which means not to read in this column.)</p></li>
<li><p><strong>ignore_flag</strong> (<em>int</em>) – Which flags should be ignored. (default: all non-zero flags are ignored.
Equivalent to ignore_flag = ~0.)</p></li>
<li><p><strong>ok_flag</strong> (<em>int</em>) – Which flags should be considered ok. (default: 0.  i.e. all non-zero
flags are ignored.)</p></li>
<li><p><strong>allow_xyz</strong> (<em>bool</em>) – Whether to allow x,y,z values in conjunction with ra,dec.  Normally,
it is an error to have both kinds of positions, but if you know that
the x,y,z, values are consistent with the given ra,dec values, it
can save time to input them, rather than calculate them using trig
functions. (default: False)</p></li>
<li><p><strong>flip_g1</strong> (<em>bool</em>) – Whether to flip the sign of the input g1 values. (default: False)</p></li>
<li><p><strong>flip_g2</strong> (<em>bool</em>) – Whether to flip the sign of the input g2 values. (default: False)</p></li>
<li><p><strong>keep_zero_weight</strong> (<em>bool</em>) – Whether to keep objects with wpos=0 in the catalog (including
any objects that indirectly get wpos=0 due to NaN or flags), so they
would be included in ntot and also in npairs calculations that use
this Catalog, although of course not contribute to the accumulated
weight of pairs. (default: False)</p></li>
<li><p><strong>save_patch_dir</strong> (<em>str</em>) – If desired, when building patches from this Catalog, save them
as FITS files in the given directory for more efficient loading when
doing cross-patch correlations with the <code class="docutils literal notranslate"><span class="pre">low_mem</span></code> option.</p></li>
<li><p><strong>hdu</strong> (<em>int</em>) – For FITS files, which hdu to read. (default: 1)</p></li>
<li><p><strong>x_hdu</strong> (<em>int</em>) – Which hdu to use for the x values. (default: hdu)</p></li>
<li><p><strong>y_hdu</strong> (<em>int</em>) – Which hdu to use for the y values. (default: hdu)</p></li>
<li><p><strong>z_hdu</strong> (<em>int</em>) – Which hdu to use for the z values. (default: hdu)</p></li>
<li><p><strong>ra_hdu</strong> (<em>int</em>) – Which hdu to use for the ra values. (default: hdu)</p></li>
<li><p><strong>dec_hdu</strong> (<em>int</em>) – Which hdu to use for the dec values. (default: hdu)</p></li>
<li><p><strong>r_hdu</strong> (<em>int</em>) – Which hdu to use for the r values. (default: hdu)</p></li>
<li><p><strong>g1_hdu</strong> (<em>int</em>) – Which hdu to use for the g1 values. (default: hdu)</p></li>
<li><p><strong>g2_hdu</strong> (<em>int</em>) – Which hdu to use for the g2 values. (default: hdu)</p></li>
<li><p><strong>k_hdu</strong> (<em>int</em>) – Which hdu to use for the k values. (default: hdu)</p></li>
<li><p><strong>patch_hdu</strong> (<em>int</em>) – Which hdu to use for the patch numbers. (default: hdu)</p></li>
<li><p><strong>w_hdu</strong> (<em>int</em>) – Which hdu to use for the w values. (default: hdu)</p></li>
<li><p><strong>wpos_hdu</strong> (<em>int</em>) – Which hdu to use for the wpos values. (default: hdu)</p></li>
<li><p><strong>flag_hdu</strong> (<em>int</em>) – Which hdu to use for the flag values. (default: hdu)</p></li>
<li><p><strong>verbose</strong> (<em>int</em>) – <p>If no logger is provided, this will optionally specify a logging level
to use.</p>
<blockquote>
<div><ul>
<li><p>0 means no logging output</p></li>
<li><p>1 means to output warnings only (default)</p></li>
<li><p>2 means to output various progress information</p></li>
<li><p>3 means to output extensive debugging information</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>log_file</strong> (<em>str</em>) – If no logger is provided, this will specify a file to write the logging
output.  (default: None; i.e. output to standard output)</p></li>
<li><p><strong>split_method</strong> (<em>str</em>) – <p>How to split the cells in the tree when building the tree structure.
Options are:</p>
<blockquote>
<div><ul>
<li><p>mean: Use the arithmetic mean of the coordinate being split.
(default)</p></li>
<li><p>median: Use the median of the coordinate being split.</p></li>
<li><p>middle: Use the middle of the range; i.e. the average of the
minimum and maximum value.</p></li>
<li><p>random: Use a random point somewhere in the middle two quartiles
of the range.</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>cat_precision</strong> (<em>int</em>) – The precision to use when writing a Catalog to an ASCII file. This
should be an integer, which specifies how many digits to write.
(default: 16)</p></li>
<li><p><strong>num_threads</strong> (<em>int</em>) – <p>How many OpenMP threads to use during the catalog load steps.
(default: use the number of cpu cores)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This won’t work if the system’s C compiler cannot use OpenMP
(e.g. clang prior to version 3.7.)</p>
</div>
</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="treecorr.Catalog.checkForNaN">
<code class="sig-name descname">checkForNaN</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">col</span></em>, <em class="sig-param"><span class="n">col_str</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.checkForNaN"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.checkForNaN" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the column has any NaNs.  If so, set those rows to have w[k]=0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> (<em>array</em>) – The input column to check.</p></li>
<li><p><strong>col_str</strong> (<em>str</em>) – The name of the column.  Used only as information in logging output.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.clear_cache">
<code class="sig-name descname">clear_cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.clear_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.clear_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear all field caches.</p>
<p>The various kinds of fields built from this catalog are cached.  This may or may not
be an optimization for your use case.  Normally only a single field is built for a
given catalog, and it is usually efficient to cache it, so it can be reused multiple
times.  E.g. for the usual Landy-Szalay NN calculation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">data_cat</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rr</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">rand_cat</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">data_cat</span><span class="p">,</span> <span class="n">rand_cat</span><span class="p">)</span>
</pre></div>
</div>
<p>the third line will be able to reuse the same fields built for the data and randoms
in the first two lines.</p>
<p>However, this also means that the memory used for the field will persist as long as
the catalog object does.  If you need to recover this memory and don’t want to delete
the catalog yet, this method lets you clear the cache.</p>
<p>There are separate caches for each kind of field.  If you want to clear just one or
some of them, you can call clear separately for the different caches:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">nfields</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">kfields</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">gfields</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">nsimplefields</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">ksimplefields</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">gsimplefields</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a copy</p>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.getGField">
<code class="sig-name descname">getGField</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">min_size</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">max_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">split_method</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">brute</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">min_top</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_top</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">coords</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">logger</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.getGField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.getGField" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="field.html#treecorr.GField" title="treecorr.GField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">GField</span></code></a> based on the g1,g2 values in this catalog.</p>
<p>The <a class="reference internal" href="field.html#treecorr.GField" title="treecorr.GField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">GField</span></code></a> object is cached, so this is efficient to call multiple times.
cf. <a class="reference internal" href="#treecorr.Catalog.resize_cache" title="treecorr.Catalog.resize_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">resize_cache</span></code></a> and <a class="reference internal" href="#treecorr.Catalog.clear_cache" title="treecorr.Catalog.clear_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">clear_cache</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_size</strong> (<em>float</em>) – The minimum radius cell required (usually min_sep). (default: 0)</p></li>
<li><p><strong>max_size</strong> (<em>float</em>) – The maximum radius cell required (usually max_sep). (default: None)</p></li>
<li><p><strong>split_method</strong> (<em>str</em>) – Which split method to use (‘mean’, ‘median’, ‘middle’, or ‘random’)
(default: ‘mean’; this value can also be given in the Catalog
constructor in the config dict.)</p></li>
<li><p><strong>brute</strong> (<em>bool</em>) – Whether to force traversal to the leaves. (default: False)</p></li>
<li><p><strong>min_top</strong> (<em>int</em>) – The minimum number of top layers to use when setting up the
field. (default: <span class="math notranslate nohighlight">\(\max(3, \log_2(N_{\rm cpu}))\)</span>)</p></li>
<li><p><strong>max_top</strong> (<em>int</em>) – The maximum number of top layers to use when setting up the
field. (default: 10)</p></li>
<li><p><strong>coords</strong> (<em>str</em>) – The kind of coordinate system to use. (default self.coords)</p></li>
<li><p><strong>logger</strong> – A Logger object if desired (default: self.logger)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="field.html#treecorr.GField" title="treecorr.GField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">GField</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.getGSimpleField">
<code class="sig-name descname">getGSimpleField</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">logger</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.getGSimpleField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.getGSimpleField" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="field.html#treecorr.GSimpleField" title="treecorr.GSimpleField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">GSimpleField</span></code></a> based on the g1,g2 values in this catalog.</p>
<p>The <a class="reference internal" href="field.html#treecorr.GSimpleField" title="treecorr.GSimpleField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">GSimpleField</span></code></a> object is cached, so this is efficient to call multiple times.
cf. <a class="reference internal" href="#treecorr.Catalog.resize_cache" title="treecorr.Catalog.resize_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">resize_cache</span></code></a> and <a class="reference internal" href="#treecorr.Catalog.clear_cache" title="treecorr.Catalog.clear_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">clear_cache</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>logger</strong> – A Logger object if desired (default: self.logger)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="field.html#treecorr.GSimpleField" title="treecorr.GSimpleField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">GSimpleField</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.getKField">
<code class="sig-name descname">getKField</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">min_size</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">max_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">split_method</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">brute</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">min_top</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_top</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">coords</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">logger</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.getKField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.getKField" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="field.html#treecorr.KField" title="treecorr.KField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">KField</span></code></a> based on the k values in this catalog.</p>
<p>The <a class="reference internal" href="field.html#treecorr.KField" title="treecorr.KField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">KField</span></code></a> object is cached, so this is efficient to call multiple times.
cf. <a class="reference internal" href="#treecorr.Catalog.resize_cache" title="treecorr.Catalog.resize_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">resize_cache</span></code></a> and <a class="reference internal" href="#treecorr.Catalog.clear_cache" title="treecorr.Catalog.clear_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">clear_cache</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_size</strong> (<em>float</em>) – The minimum radius cell required (usually min_sep). (default: 0)</p></li>
<li><p><strong>max_size</strong> (<em>float</em>) – The maximum radius cell required (usually max_sep). (default: None)</p></li>
<li><p><strong>split_method</strong> (<em>str</em>) – Which split method to use (‘mean’, ‘median’, ‘middle’, or ‘random’)
(default: ‘mean’; this value can also be given in the Catalog
constructor in the config dict.)</p></li>
<li><p><strong>brute</strong> (<em>bool</em>) – Whether to force traversal to the leaves. (default: False)</p></li>
<li><p><strong>min_top</strong> (<em>int</em>) – The minimum number of top layers to use when setting up the
field. (default: <span class="math notranslate nohighlight">\(\max(3, \log_2(N_{\rm cpu}))\)</span>)</p></li>
<li><p><strong>max_top</strong> (<em>int</em>) – The maximum number of top layers to use when setting up the
field. (default: 10)</p></li>
<li><p><strong>coords</strong> (<em>str</em>) – The kind of coordinate system to use. (default self.coords)</p></li>
<li><p><strong>logger</strong> – A Logger object if desired (default: self.logger)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="field.html#treecorr.KField" title="treecorr.KField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">KField</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.getKSimpleField">
<code class="sig-name descname">getKSimpleField</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">logger</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.getKSimpleField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.getKSimpleField" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="field.html#treecorr.KSimpleField" title="treecorr.KSimpleField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">KSimpleField</span></code></a> based on the k values in this catalog.</p>
<p>The <a class="reference internal" href="field.html#treecorr.KSimpleField" title="treecorr.KSimpleField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">KSimpleField</span></code></a> object is cached, so this is efficient to call multiple times.
cf. <a class="reference internal" href="#treecorr.Catalog.resize_cache" title="treecorr.Catalog.resize_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">resize_cache</span></code></a> and <a class="reference internal" href="#treecorr.Catalog.clear_cache" title="treecorr.Catalog.clear_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">clear_cache</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>logger</strong> – A Logger object if desired (default: self.logger)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="field.html#treecorr.KSimpleField" title="treecorr.KSimpleField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">KSimpleField</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.getNField">
<code class="sig-name descname">getNField</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">min_size</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">max_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">split_method</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">brute</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">min_top</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_top</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">coords</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">logger</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.getNField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.getNField" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="field.html#treecorr.NField" title="treecorr.NField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">NField</span></code></a> based on the positions in this catalog.</p>
<p>The <a class="reference internal" href="field.html#treecorr.NField" title="treecorr.NField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">NField</span></code></a> object is cached, so this is efficient to call multiple times.
cf. <a class="reference internal" href="#treecorr.Catalog.resize_cache" title="treecorr.Catalog.resize_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">resize_cache</span></code></a> and <a class="reference internal" href="#treecorr.Catalog.clear_cache" title="treecorr.Catalog.clear_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">clear_cache</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_size</strong> (<em>float</em>) – The minimum radius cell required (usually min_sep). (default: 0)</p></li>
<li><p><strong>max_size</strong> (<em>float</em>) – The maximum radius cell required (usually max_sep). (default: None)</p></li>
<li><p><strong>split_method</strong> (<em>str</em>) – Which split method to use (‘mean’, ‘median’, ‘middle’, or ‘random’)
(default: ‘mean’; this value can also be given in the Catalog
constructor in the config dict.)</p></li>
<li><p><strong>brute</strong> (<em>bool</em>) – Whether to force traversal to the leaves. (default: False)</p></li>
<li><p><strong>min_top</strong> (<em>int</em>) – The minimum number of top layers to use when setting up the
field. (default: <span class="math notranslate nohighlight">\(\max(3, \log_2(N_{\rm cpu}))\)</span>)</p></li>
<li><p><strong>max_top</strong> (<em>int</em>) – The maximum number of top layers to use when setting up the
field. (default: 10)</p></li>
<li><p><strong>coords</strong> (<em>str</em>) – The kind of coordinate system to use. (default: self.coords)</p></li>
<li><p><strong>logger</strong> – A Logger object if desired (default: self.logger)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An <a class="reference internal" href="field.html#treecorr.NField" title="treecorr.NField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">NField</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.getNSimpleField">
<code class="sig-name descname">getNSimpleField</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">logger</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.getNSimpleField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.getNSimpleField" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="field.html#treecorr.NSimpleField" title="treecorr.NSimpleField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">NSimpleField</span></code></a> based on the positions in this catalog.</p>
<p>The <a class="reference internal" href="field.html#treecorr.NSimpleField" title="treecorr.NSimpleField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">NSimpleField</span></code></a> object is cached, so this is efficient to call multiple times.
cf. <a class="reference internal" href="#treecorr.Catalog.resize_cache" title="treecorr.Catalog.resize_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">resize_cache</span></code></a> and <a class="reference internal" href="#treecorr.Catalog.clear_cache" title="treecorr.Catalog.clear_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">clear_cache</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>logger</strong> – A Logger object if desired (default: self.logger)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An <a class="reference internal" href="field.html#treecorr.NSimpleField" title="treecorr.NSimpleField"><code class="xref any py py-class docutils literal notranslate"><span class="pre">NSimpleField</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.get_patch_centers">
<code class="sig-name descname">get_patch_centers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.get_patch_centers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.get_patch_centers" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an array of patch centers corresponding to the patches in this catalog.</p>
<p>If the patches were set either using K-Means or by giving the centers, then this
will just return that same center array.  Otherwise, it will be calculated from the
positions of the objects with each patch number.</p>
<p>This function is automatically called when accessing the property
<code class="docutils literal notranslate"><span class="pre">patch_centers</span></code>.  So you should not normally need to call it directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An array of center coordinates used to make the patches.
Shape is (npatch, 2) for flat geometries or (npatch, 3) for 3d or
spherical geometries.  In the latter case, the centers represent
(x,y,z) coordinates on the unit sphere.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.get_patches">
<code class="sig-name descname">get_patches</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">low_mem</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.get_patches"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.get_patches" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of Catalog instances each representing a single patch from this Catalog</p>
<p>After calling this function once, the patches may be repeatedly accessed by the
<code class="docutils literal notranslate"><span class="pre">patches</span></code> attribute, without triggering a rebuild of the patches.  Furthermore,
if <code class="docutils literal notranslate"><span class="pre">patches</span></code> is accessed before calling this function, it will be called automatically
(with the default low_mem parameter).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>low_mem</strong> (<em>bool</em>) – Whether to try to leave the returned patch catalogs in an
“unloaded” state, wherein they will not load the data from a
file until they are used.  This only works if the current catalog
was loaded from a file or the patches were saved (using
<code class="docutils literal notranslate"><span class="pre">save_patch_dir</span></code>). (default: False)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.load">
<code class="sig-name descname">load</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the data from a file, if it isn’t yet loaded.</p>
<p>When a Catalog is read in from a file, it tries to delay the loading of the data from
disk until it is actually needed.  This is especially important when running over a
set of patches, since you may not be able to fit all the patches in memory at once.</p>
<p>One does not normally need to call this method explicitly.  It will run automatically
whenever the data is needed.  However, if you want to directly control when the disk
access happens, you can use this function.</p>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.makeArray">
<code class="sig-name descname">makeArray</code><span class="sig-paren">(</span><em class="sig-param">col</em>, <em class="sig-param">col_str</em>, <em class="sig-param">dtype=&lt;class 'float'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.makeArray"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.makeArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn the input column into a numpy array if it wasn’t already.
Also make sure the input is 1-d.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> (<em>array-like</em>) – The input column to be converted into a numpy array.</p></li>
<li><p><strong>col_str</strong> (<em>str</em>) – The name of the column.  Used only as information in logging output.</p></li>
<li><p><strong>dtype</strong> (<em>type</em>) – The dtype for the returned array.  (default: float)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The column converted to a 1-d numpy array.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.read_ascii">
<code class="sig-name descname">read_ascii</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">num</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">is_rand</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.read_ascii"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.read_ascii" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the catalog from an ASCII file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<em>str</em>) – The name of the file to read in.</p></li>
<li><p><strong>num</strong> (<em>int</em>) – Which number catalog are we reading. (default: 0)</p></li>
<li><p><strong>is_rand</strong> (<em>bool</em>) – Is this a random catalog? (default: False)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.read_fits">
<code class="sig-name descname">read_fits</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">num</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">is_rand</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.read_fits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.read_fits" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the catalog from a FITS file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<em>str</em>) – The name of the file to read in.</p></li>
<li><p><strong>num</strong> (<em>int</em>) – Which number catalog are we reading. (default: 0)</p></li>
<li><p><strong>is_rand</strong> (<em>bool</em>) – Is this a random catalog? (default: False)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.read_patch_centers">
<code class="sig-name descname">read_patch_centers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.read_patch_centers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.read_patch_centers" title="Permalink to this definition">¶</a></dt>
<dd><p>Read patch centers from a file.</p>
<p>This function typically gets called automatically when setting patch_centers as a
string, being the file name.  The patch centers are read from the file and returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_name</strong> (<em>str</em>) – The name of the file to write to.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The centers, as an array, which can be used to determine the patches.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.resize_cache">
<code class="sig-name descname">resize_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">maxsize</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.resize_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.resize_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Resize all field caches.</p>
<p>The various kinds of fields built from this catalog are cached.  This may or may not
be an optimization for your use case.  Normally only a single field is built for a
given catalog, and it is usually efficient to cache it, so it can be reused multiple
times.  E.g. for the usual Landy-Szalay NN calculation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dd</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">data_cat</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rr</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">rand_cat</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">data_cat</span><span class="p">,</span> <span class="n">rand_cat</span><span class="p">)</span>
</pre></div>
</div>
<p>the third line will be able to reuse the same fields built for the data and randoms
in the first two lines.</p>
<p>However, if you are making many different fields from the same catalog – for instance
because you keep changing the min_sep and max_sep for different calls – then saving
them all will tend to blow up the memory.</p>
<p>Therefore, the default number of fields (of each type) to cache is 1.  This lets the
first use case be efficient, but not use too much memory for the latter case.</p>
<p>If you prefer a different behavior, this method lets you change the number of fields to
cache.  The cache is an LRU (Least Recently Used) cache, which means only the n most
recently used fields are saved.  I.e. when it is full, the least recently used field
is removed from the cache.</p>
<p>If you call this with maxsize=0, then caching will be turned off.  A new field will be
built each time you call a process function with this catalog.</p>
<p>If you call this with maxsize&gt;1, then mutiple fields will be saved according to whatever
number you set.  This will use more memory, but may be an optimization for you depending
on what your are doing.</p>
<p>Finally, if you want to set different sizes for the different kinds of fields, then
you can call resize separately for the different caches:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">nfields</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">maxsize</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">kfields</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">maxsize</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">gfields</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">maxsize</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">nsimplefields</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">maxsize</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">ksimplefields</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">maxsize</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">gsimplefields</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">maxsize</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>maxsize</strong> (<em>float</em>) – The new maximum number of fields of each type to cache.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indx</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.select"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Trim the catalog to only include those objects with the give indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indx</strong> – A numpy array of index values to keep.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.unload">
<code class="sig-name descname">unload</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.unload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.unload" title="Permalink to this definition">¶</a></dt>
<dd><p>Bring the Catalog back to an “unloaded” state, if possible.</p>
<p>When a Catalog is read in from a file, it tries to delay the loading of the data from
disk until it is actually needed.  After loading, this method will return the Catalog
back to the unloaded state to recover the memory in the data arrays. If the Catalog is
needed again during further processing, it will re-load the data from disk at that time.</p>
<p>This will also call <a class="reference internal" href="#treecorr.Catalog.clear_cache" title="treecorr.Catalog.clear_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">clear_cache</span></code></a> to recover any memory from fields that have been
constructed as well.</p>
<p>If the Catalog was not read in from a file, then this function will only do the
<a class="reference internal" href="#treecorr.Catalog.clear_cache" title="treecorr.Catalog.clear_cache"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">clear_cache</span></code></a> step.</p>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">file_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cat_precision</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the catalog to a file.</p>
<p>The position columns are output using the same units as were used when building the
Catalog.  If you want to use a different unit, you can set the catalog’s units directly
before writing.  e.g.:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span> <span class="o">=</span> <span class="n">treecorr</span><span class="o">.</span><span class="n">Catalog</span><span class="p">(</span><span class="s1">&#39;cat.dat&#39;</span><span class="p">,</span> <span class="n">ra</span><span class="o">=</span><span class="n">ra</span><span class="p">,</span> <span class="n">dec</span><span class="o">=</span><span class="n">dec</span><span class="p">,</span>
<span class="go">                           ra_units=&#39;hours&#39;, dec_units=&#39;degrees&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">ra_units</span> <span class="o">=</span> <span class="n">coord</span><span class="o">.</span><span class="n">degrees</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;new_cat.dat&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The output file will include some of the following columns (those for which the
corresponding attribute is not None):</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ra</p></td>
<td><p>self.ra if not None</p></td>
</tr>
<tr class="row-odd"><td><p>dec</p></td>
<td><p>self.dec if not None</p></td>
</tr>
<tr class="row-even"><td><p>r</p></td>
<td><p>self.r if not None</p></td>
</tr>
<tr class="row-odd"><td><p>x</p></td>
<td><p>self.x if not None</p></td>
</tr>
<tr class="row-even"><td><p>y</p></td>
<td><p>self.y if not None</p></td>
</tr>
<tr class="row-odd"><td><p>z</p></td>
<td><p>self.z if not None</p></td>
</tr>
<tr class="row-even"><td><p>w</p></td>
<td><p>self.w if not None and self.nontrivial_w</p></td>
</tr>
<tr class="row-odd"><td><p>wpos</p></td>
<td><p>self.wpos if not None</p></td>
</tr>
<tr class="row-even"><td><p>g1</p></td>
<td><p>self.g1 if not None</p></td>
</tr>
<tr class="row-odd"><td><p>g2</p></td>
<td><p>self.g2 if not None</p></td>
</tr>
<tr class="row-even"><td><p>k</p></td>
<td><p>self.k if not None</p></td>
</tr>
<tr class="row-odd"><td><p>patch</p></td>
<td><p>self.patch if not None</p></td>
</tr>
<tr class="row-even"><td><p>meanR</p></td>
<td><p>The mean value &lt;R&gt; of pairs that fell into each bin.</p></td>
</tr>
<tr class="row-odd"><td><p>meanlogR</p></td>
<td><p>The mean value &lt;logR&gt; of pairs that fell into each bin.</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<em>str</em>) – The name of the file to write to.</p></li>
<li><p><strong>file_type</strong> (<em>str</em>) – The type of file to write (‘ASCII’ or ‘FITS’).  (default:
determine the type automatically from the extension of file_name.)</p></li>
<li><p><strong>cat_precision</strong> (<em>int</em>) – For ASCII output catalogs, the desired precision. (default: 16;
this value can also be given in the Catalog constructor in the
config dict.)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The column names that were written to the file as a list.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="treecorr.Catalog.write_patch_centers">
<code class="sig-name descname">write_patch_centers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#Catalog.write_patch_centers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.Catalog.write_patch_centers" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the patch centers to a file.</p>
<p>The output file will include the following columns:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>patch</p></td>
<td><p>patch number (0..npatch-1)</p></td>
</tr>
<tr class="row-odd"><td><p>x</p></td>
<td><p>mean x values</p></td>
</tr>
<tr class="row-even"><td><p>y</p></td>
<td><p>mean y values</p></td>
</tr>
<tr class="row-odd"><td><p>z</p></td>
<td><p>mean z values (only for spherical or 3d coordinates)</p></td>
</tr>
</tbody>
</table>
<p>It will write a FITS file if the file name ends with ‘.fits’, otherwise an ASCII file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_name</strong> (<em>str</em>) – The name of the file to write to.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="other-utilities-related-to-catalogs">
<h2>Other utilities related to catalogs<a class="headerlink" href="#other-utilities-related-to-catalogs" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="treecorr.read_catalogs">
<code class="sig-prename descclassname">treecorr.</code><code class="sig-name descname">read_catalogs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">list_key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">num</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">logger</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">is_rand</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#read_catalogs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.read_catalogs" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in a list of catalogs for the given key.</p>
<p>key should be the file_name parameter or similar key word.
list_key should be be corresponging file_list parameter, if appropriate.
At least one of key or list_key must be provided.  If both are provided, then only
one of these should be in the config dict.</p>
<p>num indicates which key to use if any of the fields like x_col, flip_g1, etc. are lists.
The default is 0, which means to use the first item in the list if they are lists.</p>
<p>If the config dict specifies that patches be used, the returned list of Catalogs will be
a concatenation of the patches for each of the specified names.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<em>dict</em>) – The configuration dict to use for the appropriate parameters</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Which key name to use for the file names. e.g. ‘file_name’ (default: None)</p></li>
<li><p><strong>list_key</strong> (<em>str</em>) – Which key name to use for the name of a list file. e.g. ‘file_list’.
Either key or list_key is required.  (default: None)</p></li>
<li><p><strong>num</strong> (<em>int</em>) – Which number catalog does this correspond to. e.g. file_name should use
num=0, file_name2 should use num=1.  (default: 0)</p></li>
<li><p><strong>logger</strong> – If desired, a Logger object for logging. (default: None, in which case
one will be built according to the config dict’s verbose level.)</p></li>
<li><p><strong>is_rand</strong> (<em>bool</em>) – If this is a random file, then setting is_rand to True will let them
skip k_col, g1_col, and g2_col if they were set for the main catalog.
(default: False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of Catalogs or None if no catalogs are specified.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="treecorr.calculateVarG">
<code class="sig-prename descclassname">treecorr.</code><code class="sig-name descname">calculateVarG</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cat_list</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#calculateVarG"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.calculateVarG" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the overall shear variance from a list of catalogs.</p>
<p>The catalogs are assumed to be equivalent, so this is just the average shear
variance (per component) weighted by the number of objects in each catalog.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cat_list</strong> – A Catalog or a list of Catalogs for which to calculate the shear variance.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The shear variance per component, aka shape noise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="treecorr.calculateVarK">
<code class="sig-prename descclassname">treecorr.</code><code class="sig-name descname">calculateVarK</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cat_list</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#calculateVarK"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.calculateVarK" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the overall kappa variance from a list of catalogs.</p>
<p>The catalogs are assumed to be equivalent, so this is just the average kappa
variance weighted by the number of objects in each catalog.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cat_list</strong> – A Catalog or a list of Catalogs for which to calculate the kappa variance.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The kappa variance</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-treecorr.catalog"></span><span class="target" id="module-catalog"></span><dl class="py function">
<dt id="treecorr.catalog.isGColRequired">
<code class="sig-prename descclassname">treecorr.catalog.</code><code class="sig-name descname">isGColRequired</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">num</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#isGColRequired"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.catalog.isGColRequired" title="Permalink to this definition">¶</a></dt>
<dd><p>A quick helper function that checks whether we need to bother reading the g1,g2 columns.</p>
<p>It checks the config dict for the output file names gg_file_name, ng_file_name (only if
num == 1), etc.  If the output files indicate that we don’t need the g1/g2 columns, then
we don’t need to raise an error if the g1_col or g2_col is invalid.</p>
<p>This makes it easier to specify columns. e.g. for an NG correlation function, the
first catalog does not need to have the g1,g2 columns, and typically wouldn’t.  So
if you specify g1_col=5, g2_col=6, say, and the first catalog does not have these columns,
you would normally get an error.</p>
<p>But instead, we check that the calculation is going to be NG from the presence of an
ng_file_name parameter, and we let the would-be error pass.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<em>dict</em>) – The configuration file to check.</p></li>
<li><p><strong>num</strong> (<em>int</em>) – Which number catalog are we working on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if some output file requires this catalog to have valid g1/g2 columns,
False if not.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="treecorr.catalog.isKColRequired">
<code class="sig-prename descclassname">treecorr.catalog.</code><code class="sig-name descname">isKColRequired</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">num</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/treecorr/catalog.html#isKColRequired"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#treecorr.catalog.isKColRequired" title="Permalink to this definition">¶</a></dt>
<dd><p>A quick helper function that checks whether we need to bother reading the k column.</p>
<p>The logic here is the same as for <a class="reference internal" href="#treecorr.catalog.isGColRequired" title="treecorr.catalog.isGColRequired"><code class="xref any py py-func docutils literal notranslate"><span class="pre">isGColRequired</span></code></a>, but we check for output files that require
the k column rather than g1,g2.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<em>dict</em>) – The configuration file to check.</p></li>
<li><p><strong>num</strong> (<em>int</em>) – Which number catalog are we working on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if some output file requires this catalog to have valid g1/g2 columns,
False if not.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="correlation2.html" class="btn btn-neutral float-right" title="Two-point Correlation Functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="overview.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, Mike Jarvis.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>